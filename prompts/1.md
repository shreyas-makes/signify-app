# Step 1: Database Models Setup

You are implementing the foundational data models for Signify, a keystroke-verification writing platform built with Rails and Inertia.js. 

CONTEXT: This is step 1 of a 16-step implementation. The existing Rails app uses Authentication Zero for auth, Inertia.js for the frontend, and follows Rails conventions.

REQUIREMENTS:
1. Create a User model that extends the existing auth system with:
   - Display name field for public profiles
   - Created/updated timestamps
   - Basic validations (email uniqueness, presence, format)

2. Create a Document model for storing user writing:
   - Title (string, not null)
   - Content (text, can be null for drafts)
   - Slug (string, unique, for public URLs)
   - Status enum (draft, published)
   - User association (belongs_to)
   - Published_at timestamp
   - Created/updated timestamps

3. Create a Keystroke model for event storage:
   - Document association (belongs_to)
   - Event_type enum (keydown, keyup)
   - Key_code (string, the key pressed)
   - Character (string, the resulting character)
   - Timestamp (datetime with precision)
   - Sequence_number (integer, for ordering)

IMPLEMENTATION APPROACH:
- Use Rails generators for models
- Add proper database indexes for performance
- Include comprehensive validations
- Write thorough tests for all models and associations
- Use factories for test data generation

TESTING REQUIREMENTS:
- Unit tests for all model validations
- Tests for associations and relationships
- Tests for any custom methods
- Factory definitions for test data

DELIVERABLES:
- Migration files for all models
- Model classes with validations and associations
- Comprehensive test coverage
- Factory definitions
- Updated routes if needed

Focus on robust data modeling with strong validation and testing. This foundation will support all future features.